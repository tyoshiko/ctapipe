

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ImPACTReconstructor &mdash; ctapipe v0.5.2.post13+gite7890e1</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="ctapipe v0.5.2.post13+gite7890e1" href="../index.html"/>
        <link rel="up" title="Reconstruction (reco)" href="../reco/index.html"/>
        <link rel="next" title="EnergyRegressor" href="ctapipe.reco.EnergyRegressor.html"/>
        <link rel="prev" title="Reconstructor" href="ctapipe.reco.Reconstructor.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> ctapipe
          

          
          </a>

          
            
            
              <div class="version">
                0.5.2.post13+gite7890e1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started For Developers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development/index.html">Development Guidelines</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Command line tools (<code class="docutils literal"><span class="pre">tools</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../analysis/index.html">Analysis (<code class="docutils literal"><span class="pre">analysis</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../calib/index.html">Calibration (<code class="docutils literal"><span class="pre">calib</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coordinates/index.html">Coordinates (<code class="docutils literal"><span class="pre">coordinates</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core/index.html">Core Structures and Base Classes (<code class="docutils literal"><span class="pre">core</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../flow/index.html">Flow-based framework (<code class="docutils literal"><span class="pre">flow</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../image/index.html">Imaging (<code class="docutils literal"><span class="pre">image</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../instrument/index.html">Instrument (<code class="docutils literal"><span class="pre">instrument</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../io/index.html">Input/Output (<code class="docutils literal"><span class="pre">io</span></code>)</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../reco/index.html">Reconstruction (<code class="docutils literal"><span class="pre">reco</span></code>)</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../reco/index.html#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reco/index.html#currently-implemented-algorithms">Currently Implemented Algorithms</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../reco/index.html#reference-api">Reference/API</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../reco/index.html#module-ctapipe.reco">ctapipe.reco Package</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../reco/index.html#classes">Classes</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reco/index.html#class-inheritance-diagram">Class Inheritance Diagram</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../utils/index.html">Utilities (<code class="docutils literal"><span class="pre">utils</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualization/index.html">Visualization (<code class="docutils literal"><span class="pre">visualization</span></code>)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAQ.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ctapipe</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../reco/index.html">Reconstruction (<code class="docutils literal"><span class="pre">reco</span></code>)</a> &raquo;</li>
        
      <li>ImPACTReconstructor</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/ctapipe.reco.ImPACTReconstructor.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="impactreconstructor">
<h1>ImPACTReconstructor<a class="headerlink" href="#impactreconstructor" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="ctapipe.reco.ImPACTReconstructor">
<em class="property">class </em><code class="descclassname">ctapipe.reco.</code><code class="descname">ImPACTReconstructor</code><span class="sig-paren">(</span><em>root_dir=’.’</em>, <em>minimiser=’minuit’</em>, <em>prior=”</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">ctapipe.reco.reco_algorithms.Reconstructor</span></code></p>
<p>This class is an implementation if the impact_reco Monte Carlo
Template based image fitting method from <a class="reference internal" href="#parsons14" id="id1">[parsons14]</a>.  This method uses a
comparision of the predicted image from a library of image
templates to perform a maximum likelihood fit for the shower axis,
energy and height of maximum.</p>
<p>Because this application is computationally intensive the usual
advice to use astropy units for all quantities is ignored (as
these slow down some computations), instead units within the class
are fixed:</p>
<ul class="simple">
<li>Angular units in radians</li>
<li>Distance units in metres</li>
<li>Energy units in TeV</li>
</ul>
<p class="rubric">References</p>
<table class="docutils citation" frame="void" id="parsons14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[parsons14]</td><td><em>(<a class="fn-backref" href="#id1">1</a>, <a class="fn-backref" href="#id2">2</a>)</em> Parsons &amp; Hinton, Astroparticle Physics 56 (2014), pp. 26-34</td></tr>
</tbody>
</table>
<p class="rubric">Methods Summary</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.draw_nominal_surface" title="ctapipe.reco.ImPACTReconstructor.draw_nominal_surface"><code class="xref py py-obj docutils literal"><span class="pre">draw_nominal_surface</span></code></a>(shower_seed,&nbsp;energy_seed)</td>
<td>Simple reconstruction for evaluating the likelihood in a grid across the  nominal system, fixing all values but the source position of the gamma rays.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.draw_tilted_surface" title="ctapipe.reco.ImPACTReconstructor.draw_tilted_surface"><code class="xref py py-obj docutils literal"><span class="pre">draw_tilted_surface</span></code></a>(shower_seed,&nbsp;energy_seed)</td>
<td>Simple reconstruction for evaluating the likelihood in a grid across the  nominal system, fixing all values but the core position of the gamma rays.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_brightest_mean" title="ctapipe.reco.ImPACTReconstructor.get_brightest_mean"><code class="xref py py-obj docutils literal"><span class="pre">get_brightest_mean</span></code></a>([num_pix])</td>
<td>This is a simple function to find the peak position of each image in an event which will be used later in the Xmax calculation.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood" title="ctapipe.reco.ImPACTReconstructor.get_likelihood"><code class="xref py py-obj docutils literal"><span class="pre">get_likelihood</span></code></a>(source_x,&nbsp;source_y,&nbsp;core_x,&nbsp;…)</td>
<td>Get the likelihood that the image predicted at the given test position matches the camera image.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood_min" title="ctapipe.reco.ImPACTReconstructor.get_likelihood_min"><code class="xref py py-obj docutils literal"><span class="pre">get_likelihood_min</span></code></a>(x)</td>
<td>Wrapper class around likelihood function for use with scipy</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_prediction" title="ctapipe.reco.ImPACTReconstructor.get_prediction"><code class="xref py py-obj docutils literal"><span class="pre">get_prediction</span></code></a>(tel_id,&nbsp;shower_reco,&nbsp;energy_reco)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.get_shower_max" title="ctapipe.reco.ImPACTReconstructor.get_shower_max"><code class="xref py py-obj docutils literal"><span class="pre">get_shower_max</span></code></a>(source_x,&nbsp;source_y,&nbsp;core_x,&nbsp;…)</td>
<td>Function to calculate the depth of shower maximum geometrically under the assumption that the shower maximum lies at the brightest point of the camera image.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.image_prediction" title="ctapipe.reco.ImPACTReconstructor.image_prediction"><code class="xref py py-obj docutils literal"><span class="pre">image_prediction</span></code></a>(type,&nbsp;zenith,&nbsp;azimuth,&nbsp;…)</td>
<td>Creates predicted image for the specified pixels, interpolated from the template library.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.initialise_templates" title="ctapipe.reco.ImPACTReconstructor.initialise_templates"><code class="xref py py-obj docutils literal"><span class="pre">initialise_templates</span></code></a>(tel_type)</td>
<td>Check if templates for a given telescope type has been initialised</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.minimise" title="ctapipe.reco.ImPACTReconstructor.minimise"><code class="xref py py-obj docutils literal"><span class="pre">minimise</span></code></a>(params,&nbsp;step,&nbsp;limits[,&nbsp;minimiser_name])</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.predict" title="ctapipe.reco.ImPACTReconstructor.predict"><code class="xref py py-obj docutils literal"><span class="pre">predict</span></code></a>(shower_seed,&nbsp;energy_seed)</td>
<td><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.rotate_translate" title="ctapipe.reco.ImPACTReconstructor.rotate_translate"><code class="xref py py-obj docutils literal"><span class="pre">rotate_translate</span></code></a>(pixel_pos_x,&nbsp;pixel_pos_y,&nbsp;…)</td>
<td>Function to perform rotation and translation of pixel lists</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ctapipe.reco.ImPACTReconstructor.set_event_properties" title="ctapipe.reco.ImPACTReconstructor.set_event_properties"><code class="xref py py-obj docutils literal"><span class="pre">set_event_properties</span></code></a>(image,&nbsp;pixel_x,&nbsp;…)</td>
<td>The setter class is used to set the event properties within this class before minimisation can take place.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods Documentation</p>
<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.draw_nominal_surface">
<code class="descname">draw_nominal_surface</code><span class="sig-paren">(</span><em>shower_seed</em>, <em>energy_seed</em>, <em>bins=30</em>, <em>nominal_range=&lt;Quantity 2.5 deg&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.draw_nominal_surface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.draw_nominal_surface" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple reconstruction for evaluating the likelihood in a grid across the 
nominal system, fixing all values but the source position of the gamma rays. 
Useful for checking the reconstruction performance of the algorithm</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shower_seed: ReconstructedShowerContainer</strong></p>
<blockquote>
<div><p>Best fit ImPACT shower geometry</p>
</div></blockquote>
<p><strong>energy_seed: ReconstructedEnergyContainer</strong></p>
<blockquote>
<div><p>Best fit ImPACT energy</p>
</div></blockquote>
<p><strong>bins: int</strong></p>
<blockquote>
<div><p>Number of bins in surface evaluation</p>
</div></blockquote>
<p><strong>nominal_range: Quantity</strong></p>
<blockquote>
<div><p>Range over which to create likelihood surface</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray, ndarray, ndarray:</p>
<p>Bin centres in X and Y coordinates and the values of the likelihood at each</p>
<p class="last">position</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.draw_tilted_surface">
<code class="descname">draw_tilted_surface</code><span class="sig-paren">(</span><em>shower_seed</em>, <em>energy_seed</em>, <em>bins=50</em>, <em>core_range=&lt;Quantity 100.0 m&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.draw_tilted_surface"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.draw_tilted_surface" title="Permalink to this definition">¶</a></dt>
<dd><p>Simple reconstruction for evaluating the likelihood in a grid across the 
nominal system, fixing all values but the core position of the gamma rays. 
Useful for checking the reconstruction performance of the algorithm</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shower_seed: ReconstructedShowerContainer</strong></p>
<blockquote>
<div><p>Best fit ImPACT shower geometry</p>
</div></blockquote>
<p><strong>energy_seed: ReconstructedEnergyContainer</strong></p>
<blockquote>
<div><p>Best fit ImPACT energy</p>
</div></blockquote>
<p><strong>bins: int</strong></p>
<blockquote>
<div><p>Number of bins in surface evaluation</p>
</div></blockquote>
<p><strong>nominal_range: Quantity</strong></p>
<blockquote>
<div><p>Range over which to create likelihood surface</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray, ndarray, ndarray:</p>
<p>Bin centres in X and Y coordinates and the values of the likelihood at each</p>
<p class="last">position</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_brightest_mean">
<code class="descname">get_brightest_mean</code><span class="sig-paren">(</span><em>num_pix=3</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_brightest_mean"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_brightest_mean" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a simple function to find the peak position of each image
in an event which will be used later in the Xmax
calculation. Peak is found by taking the average position of
the n hottest pixels in the image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>num_pix: int</strong></p>
<blockquote>
<div><p>Number of pixels the average position from</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_likelihood">
<code class="descname">get_likelihood</code><span class="sig-paren">(</span><em>source_x</em>, <em>source_y</em>, <em>core_x</em>, <em>core_y</em>, <em>energy</em>, <em>x_max_scale</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_likelihood"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the likelihood that the image predicted at the given test
position matches the camera image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>source_x: float</strong></p>
<blockquote>
<div><p>Source position of shower in the nominal system (in deg)</p>
</div></blockquote>
<p><strong>source_y: float</strong></p>
<blockquote>
<div><p>Source position of shower in the nominal system (in deg)</p>
</div></blockquote>
<p><strong>core_x: float</strong></p>
<blockquote>
<div><p>Core position of shower in tilted telescope system (in m)</p>
</div></blockquote>
<p><strong>core_y: float</strong></p>
<blockquote>
<div><p>Core position of shower in tilted telescope system (in m)</p>
</div></blockquote>
<p><strong>energy: float</strong></p>
<blockquote>
<div><p>Shower energy (in TeV)</p>
</div></blockquote>
<p><strong>x_max_scale: float</strong></p>
<blockquote>
<div><p>Scaling factor applied to geometrically calculated Xmax</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">float: Likelihood the model represents the camera image at this position</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_likelihood_min">
<code class="descname">get_likelihood_min</code><span class="sig-paren">(</span><em>x</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_likelihood_min"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_likelihood_min" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper class around likelihood function for use with scipy
minimisers</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>x: ndarray</strong></p>
<blockquote>
<div><p>Array of minimisation parameters</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">float: Likelihood value of test position</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_prediction">
<code class="descname">get_prediction</code><span class="sig-paren">(</span><em>tel_id</em>, <em>shower_reco</em>, <em>energy_reco</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_prediction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_prediction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.get_shower_max">
<code class="descname">get_shower_max</code><span class="sig-paren">(</span><em>source_x</em>, <em>source_y</em>, <em>core_x</em>, <em>core_y</em>, <em>zen</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.get_shower_max"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.get_shower_max" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to calculate the depth of shower maximum geometrically
under the assumption that the shower maximum lies at the
brightest point of the camera image.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>source_x: float</strong></p>
<blockquote>
<div><p>Event source position in nominal frame</p>
</div></blockquote>
<p><strong>source_y: float</strong></p>
<blockquote>
<div><p>Event source position in nominal frame</p>
</div></blockquote>
<p><strong>core_x: float</strong></p>
<blockquote>
<div><p>Event core position in telescope tilted frame</p>
</div></blockquote>
<p><strong>core_y: float</strong></p>
<blockquote>
<div><p>Event core position in telescope tilted frame</p>
</div></blockquote>
<p><strong>zen: float</strong></p>
<blockquote>
<div><p>Zenith angle of event</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">float: Depth of maximum of air shower</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.image_prediction">
<code class="descname">image_prediction</code><span class="sig-paren">(</span><em>type</em>, <em>zenith</em>, <em>azimuth</em>, <em>energy</em>, <em>impact</em>, <em>x_max</em>, <em>pix_x</em>, <em>pix_y</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.image_prediction"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.image_prediction" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates predicted image for the specified pixels, interpolated
from the template library.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>type: string</strong></p>
<blockquote>
<div><p>Telescope type specifier</p>
</div></blockquote>
<p><strong>zenith: float</strong></p>
<blockquote>
<div><p>Zenith angle of observations</p>
</div></blockquote>
<p><strong>azimuth: float</strong></p>
<blockquote>
<div><p>Azimuth angle of observations</p>
</div></blockquote>
<p><strong>energy: float</strong></p>
<blockquote>
<div><p>Event energy (TeV)</p>
</div></blockquote>
<p><strong>impact: float</strong></p>
<blockquote>
<div><p>Impact diance of shower (metres)</p>
</div></blockquote>
<p><strong>x_max: float</strong></p>
<blockquote>
<div><p>Depth of shower maximum (num bins from expectation)</p>
</div></blockquote>
<p><strong>pix_x: ndarray</strong></p>
<blockquote>
<div><p>X coordinate of pixels</p>
</div></blockquote>
<p><strong>pix_y: ndarray</strong></p>
<blockquote>
<div><p>Y coordinate of pixels</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">ndarray: predicted amplitude for all pixels</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.initialise_templates">
<code class="descname">initialise_templates</code><span class="sig-paren">(</span><em>tel_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.initialise_templates"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.initialise_templates" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if templates for a given telescope type has been initialised
and if not do it and add to the dictionary</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tel_type: dictionary</strong></p>
<blockquote>
<div><p>Dictionary of telescope types in event</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">boolean: Confirm initialisation</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.minimise">
<code class="descname">minimise</code><span class="sig-paren">(</span><em>params</em>, <em>step</em>, <em>limits</em>, <em>minimiser_name=’minuit’</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.minimise"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.minimise" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>params</strong></p>
<p><strong>step</strong></p>
<p><strong>limits</strong></p>
<p class="last"><strong>minimiser_name</strong></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.predict">
<code class="descname">predict</code><span class="sig-paren">(</span><em>shower_seed</em>, <em>energy_seed</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.predict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.predict" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shower_seed: ReconstructedShowerContainer</strong></p>
<blockquote>
<div><p>Seed shower geometry to be used in the fit</p>
</div></blockquote>
<p><strong>energy_seed: ReconstructedEnergyContainer</strong></p>
<blockquote>
<div><p>Seed energy to be used in fit</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ReconstructedShowerContainer, ReconstructedEnergyContainer:</p>
<p class="last">Reconstructed ImPACT shower geometry and energy</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="staticmethod">
<dt id="ctapipe.reco.ImPACTReconstructor.rotate_translate">
<em class="property">static </em><code class="descname">rotate_translate</code><span class="sig-paren">(</span><em>pixel_pos_x</em>, <em>pixel_pos_y</em>, <em>x_trans</em>, <em>y_trans</em>, <em>phi</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.rotate_translate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.rotate_translate" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to perform rotation and translation of pixel lists</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>pixel_pos_x: ndarray</strong></p>
<blockquote>
<div><p>Array of pixel x positions</p>
</div></blockquote>
<p><strong>pixel_pos_y: ndarray</strong></p>
<blockquote>
<div><p>Array of pixel x positions</p>
</div></blockquote>
<p><strong>x_trans: float</strong></p>
<blockquote>
<div><p>Translation of position in x coordinates</p>
</div></blockquote>
<p><strong>y_trans: float</strong></p>
<blockquote>
<div><p>Translation of position in y coordinates</p>
</div></blockquote>
<p><strong>phi: float</strong></p>
<blockquote>
<div><p>Rotation angle of pixels</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">ndarray,ndarray: Transformed pixel x and y coordinates</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ctapipe.reco.ImPACTReconstructor.set_event_properties">
<code class="descname">set_event_properties</code><span class="sig-paren">(</span><em>image</em>, <em>pixel_x</em>, <em>pixel_y</em>, <em>pixel_area</em>, <em>type_tel</em>, <em>tel_x</em>, <em>tel_y</em>, <em>array_direction</em>, <em>hillas</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ctapipe/reco/ImPACT.html#ImPACTReconstructor.set_event_properties"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#ctapipe.reco.ImPACTReconstructor.set_event_properties" title="Permalink to this definition">¶</a></dt>
<dd><p>The setter class is used to set the event properties within this
class before minimisation can take place. This simply copies a
bunch of useful properties to class members, so that we can
use them later without passing all this information around.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>image: dictionary</strong></p>
<blockquote>
<div><p>Amplitude of pixels in camera images</p>
</div></blockquote>
<p><strong>pixel_x: dictionary</strong></p>
<blockquote>
<div><p>X position of pixels in nominal system</p>
</div></blockquote>
<p><strong>pixel_y: dictionary</strong></p>
<blockquote>
<div><p>Y position of pixels in nominal system</p>
</div></blockquote>
<p><strong>pixel_area: dictionary</strong></p>
<blockquote>
<div><p>Area of pixel in each telescope type</p>
</div></blockquote>
<p><strong>type_tel: dictionary</strong></p>
<blockquote>
<div><p>Type of telescope</p>
</div></blockquote>
<p><strong>tel_x: dictionary</strong></p>
<blockquote>
<div><p>X position of telescope</p>
</div></blockquote>
<p><strong>tel_y: dictionary</strong></p>
<blockquote>
<div><p>Y position of telescope</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ctapipe.reco.EnergyRegressor.html" class="btn btn-neutral float-right" title="EnergyRegressor" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="ctapipe.reco.Reconstructor.html" class="btn btn-neutral" title="Reconstructor" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright ctapipe developers.  Last updated 01 Aug 2017 15:35.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.5.2.post13+gite7890e1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>